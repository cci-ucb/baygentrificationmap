(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,a){e.exports=a(29)},25:function(e,t,a){},26:function(e,t,a){},29:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(16),i=a.n(r),l=(a(25),a(7)),c=a(8),s=a(14),u=a(10),m=a(9),d=a(13),p=a(31),y=a(34),f=a(32),h=a(33),v=a(1),g=a.n(v),E=function(e){return o.a.createElement("div",{className:"uk-card uk-card-default uk-card-body uk-width-1-2@m uk-card-small map-legend"},o.a.createElement("h5",null,e.policy),"Count of anti-displacement policies"===e.policy?o.a.createElement("div",null,o.a.createElement("div",{className:"legend-items"},o.a.createElement("div",{className:"legend-label"},"0"),o.a.createElement("div",{className:"legend-label"},"\xa0"),o.a.createElement("div",{className:"legend-label"},"\xa0"),o.a.createElement("div",{className:"legend-label"},"\xa0"),o.a.createElement("div",{className:"legend-label"},"10+")),o.a.createElement("div",{className:"legend-items"},o.a.createElement("div",{className:"legend-color gradient-1"}),o.a.createElement("div",{className:"legend-color gradient-2"}),o.a.createElement("div",{className:"legend-color gradient-3"}),o.a.createElement("div",{className:"legend-color gradient-4"}),o.a.createElement("div",{className:"legend-color gradient-5"}))):o.a.createElement("div",null,o.a.createElement("div",{className:"legend-items"},o.a.createElement("div",{className:"legend-label large"},"No"),o.a.createElement("div",{className:"legend-label large"},"Yes")),o.a.createElement("div",{className:"legend-items"},o.a.createElement("div",{className:"legend-color large color-no"}),o.a.createElement("div",{className:"legend-color large color-yes"}))))},b=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidUpdate",value:function(){document.querySelector(".inventory-box").scrollTop=0}},{key:"render",value:function(){var e=this,t=this.props.cityData&&[1,2,3,4,5,6,7,8].map(function(t){return e.props.cityData["source"+t]}).filter(function(e){return e});return o.a.createElement("div",{className:"inventory-box uk-padding-small"},o.a.createElement("h5",{className:"uk-text-bold"},this.props.cityData?this.props.cityData.city+": "+this.props.cityData.total+" policy measure"+(1===this.props.cityData.total?"":"s"):"Choose a city from the map to see its anti-displacement policy measures"),o.a.createElement("ul",{className:"inventory-list uk-list uk-list-divider"},this.props.policyList.map(function(t){var a=e.props.cityData&&"NO"!==e.props.cityData[t.code].slice(0,2).toUpperCase();return o.a.createElement("li",{key:t.code,className:"inventory-list-item"},o.a.createElement("span",{className:a?"highlighted-policy":""},a&&"\u2713 ",t.name," ",o.a.createElement("a",{className:"uk-text-secondary",href:"#"+t.code},"\u24d8"),": "),e.props.cityData&&e.props.cityData[t.code])})),o.a.createElement("span",{className:"inventory-sources"},t&&t.map(function(e,t){return o.a.createElement("span",{className:"inventory-source-link",key:t+1},t>0&&", ",o.a.createElement("a",{href:e,target:"_blank",rel:"noopener noreferrer"},"Source ",t+1))})))}}]),t}(o.a.Component),k=(a(26),g.a.latLngBounds(g.a.latLng(36.923548,-123.895569),g.a.latLng(38.32873,-120.470581))),N=function(e){return e<1?"#FAEFDA":e<3?"#F4E0BB":e<6?"#FCD07E":e<10?"#F4B030":"#e49d1b"},w=function(e){return e&&"NO"!==e.slice(0,2).toUpperCase()?"#F9BB56":"#E2DDCF"},C=function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).resetPosition=function(){e.refs.map.leafletElement.flyToBounds(k,{paddingTopLeft:[250,0],duration:.5,easeLinearity:.5})},e.bringLayerToFront=function(e){g.a.Browser.ie||g.a.Browser.opera||g.a.Browser.edge||e.bringToFront()},e.updateStyle=function(t,a){e.setState({focusCity:t,focusPolicy:a,style:function(e){return{fillColor:"total"===a?N(e.properties.total):w(e.properties[a]),weight:e.properties.city===t?2:1,opacity:e.properties.city===t?1:.5,color:e.properties.city===t?"#000":"#FFF",fillOpacity:.9}}})},e.zoomToFeature=function(t){var a=e.refs.map.leafletElement,n=e.refs.data.leafletElement,o=Object.values(n._layers).find(function(e){return e.feature.properties.city===t});e.bringLayerToFront(o),a.flyToBounds(o._bounds,{paddingTopLeft:[250,0],duration:.25,easeLinearity:.5,maxZoom:10})},e.handleFeatureClick=function(t){var a=t.target;e.updateStyle(t.target.feature.properties.city,e.state.focusPolicy),e.bringLayerToFront(a)},e.onEachFeature=function(t,a){a.on({click:e.handleFeatureClick.bind(Object(m.a)(e))})},e.state={lat:37.7,lng:-122.6,zoom:9,mapData:null,focusCity:null,focusPolicy:"total",style:function(e){return{fillColor:N(e.properties.total),weight:1,opacity:.5,color:"#fff",fillOpacity:.9}},cityList:null,policyList:[{code:"justcause",name:"Just Cause Eviction Ordinance"},{code:"stabilizat",name:"Rent Stabilization or Rent Control"},{code:"reviewboar",name:"Rent Review Board and/or Mediation"},{code:"mobilehome",name:"Mobile home rent control"},{code:"sropres",name:"SRO preservation"},{code:"condoconv",name:"Condominium conversion regulations"},{code:"foreclosur",name:"Foreclosure assistance"},{code:"jobshousin",name:"Jobs-housing linkage fee"},{code:"commercial",name:"Commerical linkage fee"},{code:"trustfund",name:"Housing trust fund"},{code:"inclusiona",name:"Inclusionary zoning"},{code:"densitybon",name:"Density bonus ordinance"},{code:"landtrust",name:"Community Land Trusts"},{code:"firstsourc",name:"First source hiring"}]},e}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("https://raw.githubusercontent.com/urbandisplacement/baypolicydata/master/mapData.json").then(function(e){return e.json()}).then(function(t){e.setState({mapData:t})}).catch(function(e){console.error(e)})}},{key:"componentDidUpdate",value:function(e,t){if(!t.mapData&&this.state.mapData){var a=!0,n=!1,o=void 0;try{for(var r,i=this.state.mapData.features[Symbol.iterator]();!(a=(r=i.next()).done);a=!0){var l=r.value,c=0,s=!0,u=!1,m=void 0;try{for(var d,p=this.state.policyList[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var y=d.value;l.properties[y.code]&&"NO"!==l.properties[y.code].slice(0,2).toUpperCase()&&c++}}catch(h){u=!0,m=h}finally{try{s||null==p.return||p.return()}finally{if(u)throw m}}l.properties.total=c}}catch(h){n=!0,o=h}finally{try{a||null==i.return||i.return()}finally{if(n)throw o}}var f=this.state.mapData.features.reduce(function(e,t){return e.push(t.properties.city),e},[]).sort();this.setState({cityList:f})}}},{key:"render",value:function(){var e=this,t=[this.state.lat,this.state.lng],a=this.state.mapData&&this.state.mapData.features.find(function(t){return t.properties.city===e.state.focusCity}),n=this.state.policyList.find(function(t){return t.code===e.state.focusPolicy});return this.state.mapData&&o.a.createElement("div",null,o.a.createElement(p.a,{ref:"map",center:t,zoom:this.state.zoom,zoomControl:!1,scrollWheelZoom:!0,className:"map-container"},o.a.createElement(y.a,{className:"basemap-layer",url:"https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png",attribution:'\xa9 <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors \xa9 <a href="https://carto.com/attributions">CARTO</a>'}),o.a.createElement(y.a,{className:"reference-layer",url:"https://{s}.basemaps.cartocdn.com/light_only_labels/{z}/{x}/{y}{r}.png",pane:"shadowPane"}),o.a.createElement(f.a,{ref:"data",data:this.state.mapData,style:this.state.style,onEachFeature:this.onEachFeature}),o.a.createElement(h.a,{position:"topright"})),o.a.createElement("div",{className:"overlay-container"},o.a.createElement("button",{className:"uk-button uk-button-default policy-selector",type:"button"},"Map a specific policy... "),o.a.createElement("div",{"uk-dropdown":"pos: bottom-right; mode: click"},o.a.createElement("div",{className:"uk-height-medium uk-overflow-auto"},o.a.createElement("ul",{className:"uk-nav uk-dropdown-nav"},o.a.createElement("li",null,o.a.createElement("a",{href:"#",className:"total"===this.state.focusPolicy?"active":"",onClick:function(){return e.updateStyle(e.state.focusCity,"total")}},"Count of anti-displacement policies")),o.a.createElement("li",{className:"uk-nav-divider"}),this.state.policyList.map(function(t){return o.a.createElement("li",{key:t.code},o.a.createElement("a",{href:"#",className:e.state.focusPolicy===t.code?"active":"",onClick:function(){return e.updateStyle(e.state.focusCity,t.code)}},t.name))})))),o.a.createElement("button",{className:"uk-button uk-button-default city-selector",type:"button"},"Find a city... "),o.a.createElement("div",{"uk-dropdown":"pos: bottom-right; mode: click"},o.a.createElement("div",{className:"uk-height-medium uk-overflow-auto"},o.a.createElement("ul",{className:"uk-nav uk-dropdown-nav"},o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){e.updateStyle(null,e.state.focusPolicy),e.resetPosition()}},"Show All")),o.a.createElement("li",{className:"uk-nav-divider"}),this.state.cityList&&this.state.cityList.map(function(t){return o.a.createElement("li",{key:t},o.a.createElement("a",{href:"#",className:e.state.focusCity===t?"active":"",onClick:function(){e.updateStyle(t,e.state.focusPolicy),e.zoomToFeature(t)}},t))})))),o.a.createElement(E,{policy:n&&n.name?n.name:"Count of anti-displacement policies"}),o.a.createElement(b,{policyList:this.state.policyList,cityData:a&&a.properties})))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[19,1,2]]]);
//# sourceMappingURL=main.de8767a8.chunk.js.map